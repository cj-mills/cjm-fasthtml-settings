# Routes


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Configuration

Module-level configuration that can be customized by users before
importing the router.

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-settings/blob/main/cjm_fasthtml_settings/routes.py#L37"
target="_blank" style="float:right; font-size:smaller">source</a>

### RoutesConfig

>  RoutesConfig ()

*Configuration for settings routes behavior.*

### Configuring Settings

The
[`configure_settings()`](https://cj-mills.github.io/cjm-fasthtml-settings/routes.html#configure_settings)
function is a convenience helper that sets all configuration options at
once, providing a cleaner alternative to setting `config` attributes
individually.

This is the recommended way to configure the settings system before
adding the router to your app.

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-settings/blob/main/cjm_fasthtml_settings/routes.py#L49"
target="_blank" style="float:right; font-size:smaller">source</a>

### configure_settings

>  configure_settings (config_dir:pathlib.Path=None,
>                          wrap_with_layout:Callable=None, plugin_registry=None,
>                          default_schema:str='general',
>                          menu_section_title:str='Settings')

*Configure the settings system with a single function call.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>config_dir</td>
<td>Path</td>
<td>None</td>
<td>Directory for storing configuration files</td>
</tr>
<tr>
<td>wrap_with_layout</td>
<td>Callable</td>
<td>None</td>
<td>Function to wrap full page content with app layout</td>
</tr>
<tr>
<td>plugin_registry</td>
<td>NoneType</td>
<td>None</td>
<td>Optional plugin registry (must implement
PluginRegistryProtocol)</td>
</tr>
<tr>
<td>default_schema</td>
<td>str</td>
<td>general</td>
<td>Default schema to display</td>
</tr>
<tr>
<td>menu_section_title</td>
<td>str</td>
<td>Settings</td>
<td>Title for the settings menu section</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>RoutesConfig</strong></td>
<td></td>
<td><strong>Configured RoutesConfig instance</strong></td>
</tr>
</tbody>
</table>

## Error Handling Integration

When the `cjm-error-handling` library is installed, settings routes use
structured errors for better error tracking:

- **`ConfigurationError`**: Raised for config load/save failures,
  missing config files, or parse errors
- **`ValidationError`**: Raised for invalid configuration data or schema
  validation failures

These structured errors provide: - User-friendly messages for alerts -
Debug information for logging - Rich context (schema_id, operation,
config_path, etc.) - Error serialization for API responses

**Without the library**: Falls back to returning error alert components
directly

**Usage**:

``` python
try:
    if save_config(schema_id, config_data, config_dir):
        # Success
        pass
except ConfigurationError as e:
    # Handle structured error
    return create_error_alert(e.get_user_message())
```

## Helper Functions

## API Router and Routes

The module-level `settings_ar` router can be directly imported and
attached to your FastHTML app.

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-settings/blob/main/cjm_fasthtml_settings/routes.py#L83"
target="_blank" style="float:right; font-size:smaller">source</a>

### index

>  index (request, id:str=None)

*Main settings page.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td></td>
<td></td>
<td>FastHTML request object</td>
</tr>
<tr>
<td>id</td>
<td>str</td>
<td>None</td>
<td>Schema ID to display (defaults to config.default_schema)</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td></td>
<td><strong>Settings page content</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-settings/blob/main/cjm_fasthtml_settings/routes.py#L143"
target="_blank" style="float:right; font-size:smaller">source</a>

### save

>  save (request, id:str)

*Save configuration handler.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td></td>
<td>FastHTML request object</td>
</tr>
<tr>
<td>id</td>
<td>str</td>
<td>Schema ID to save</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td><strong>Response with form or error</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-settings/blob/main/cjm_fasthtml_settings/routes.py#L173"
target="_blank" style="float:right; font-size:smaller">source</a>

### reset

>  reset (id:str)

*Reset configuration to defaults handler.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>str</td>
<td>Schema ID to reset</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td><strong>Response with form or error</strong></td>
</tr>
</tbody>
</table>

## Plugin Routes (Optional)

These routes are only active if `config.plugin_registry` is set.

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-settings/blob/main/cjm_fasthtml_settings/routes.py#L198"
target="_blank" style="float:right; font-size:smaller">source</a>

### plugin_reset

>  plugin_reset (id:str)

*Reset plugin configuration to defaults handler.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>str</td>
<td>Plugin unique ID</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td><strong>Response with form or error</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-settings/blob/main/cjm_fasthtml_settings/routes.py#L226"
target="_blank" style="float:right; font-size:smaller">source</a>

### plugin_save

>  plugin_save (request, id:str)

*Save plugin configuration handler.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td></td>
<td>FastHTML request object</td>
</tr>
<tr>
<td>id</td>
<td>str</td>
<td>Plugin unique ID</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td><strong>Response with form or error</strong></td>
</tr>
</tbody>
</table>

## Usage Example

``` python
# Example: Using the settings router in your app
from cjm_fasthtml_settings.core.schemas import registry
from cjm_fasthtml_settings.core.config import get_app_config_schema

# First, register your schemas
registry.register(get_app_config_schema(app_title="My App", include_theme=False))
registry.register({
    "name": "database",
    "title": "Database Settings",
    "type": "object",
    "properties": {
        "host": {"type": "string", "title": "Host", "default": "localhost"}
    }
})

# NEW WAY: Use the configure_settings helper (recommended)
from cjm_fasthtml_settings.routes import configure_settings
from pathlib import Path

configure_settings(
    config_dir=Path("my_configs"),
    default_schema="general",
    menu_section_title="Settings"
)

# OLD WAY: Direct config attribute setting (still works)
# from cjm_fasthtml_settings.routes import config
# config.config_dir = Path("my_configs")
# config.default_schema = "general"

# Then import and use the router
from cjm_fasthtml_settings.routes import settings_ar, config

print(f"Settings router prefix: {settings_ar.prefix}")
print(f"Registered schemas: {registry.list_schemas()}")
print(f"Config directory: {config.config_dir}")
```

    Settings router prefix: /settings
    Registered schemas: ['general', 'database']
    Config directory: my_configs
